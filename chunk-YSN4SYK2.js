import{a as $}from"./chunk-377UHWRP.js";import{a as K}from"./chunk-7UOKYF4Y.js";import{a as N,b as j,f as V,k as W}from"./chunk-77JBAVBO.js";import{f as L}from"./chunk-SKHFEV3S.js";import{d as B}from"./chunk-OJLFCCTT.js";import"./chunk-M63GBMWQ.js";import"./chunk-LJMOF55N.js";import{$ as b,$a as n,B as v,Ba as o,Ja as _,L as y,Qa as u,W as m,Wa as h,Ya as g,Z as M,Za as P,_a as w,ab as i,bb as f,gb as x,hb as I,j as C,kb as r,lb as T,mb as D,nb as q,oa as k,ob as F,pa as E,pb as R,ra as O,rb as A,y as S}from"./chunk-RMOKAAJ7.js";var z=(()=>{let e=class e{constructor(){this.elementRef=m(O)}ngAfterViewInit(){this.elementRef.nativeElement?.focus()}};e.\u0275fac=function(c){return new(c||e)},e.\u0275dir=b({type:e,selectors:[["","appAutofocus",""]],standalone:!0});let t=e;return t})();var U=(t,e)=>e.id;function G(t,e){if(t&1&&(n(0,"div",7)(1,"a",8)(2,"p",9),r(3),i(),n(4,"p"),r(5),i()(),n(6,"button",10),f(7,"app-icon",11),i()()),t&2){let l=e.$implicit;o(),h("routerLink","/app/transactions/"+l.id),o(2),D(" ",l.foretag," "),o(2),T(l.ticker),o(2),h("icon","favorite-plus")}}function J(t,e){if(t&1&&P(0,G,8,4,"div",7,U),t&2){let l=I();w(l)}}function Q(t,e){t&1&&(n(0,"div",12)(1,"p"),r(2,"H\xE4r kan du s\xF6ka p\xE5:"),i(),n(3,"ul")(4,"li"),r(5,"Bolag, t ex Investor"),i(),n(6,"li"),r(7,"Symboler, t ex INVE_B"),i(),n(8,"li"),r(9,"ISIN"),i()()())}function X(t,e){t&1&&(n(0,"div",6),u(1,J,2,0)(2,Q,10,0),i()),t&2&&(o(),g(1,e.length?1:2))}var me=(()=>{let e=class e{constructor(){this.closeSearch=E(),this.query=_(""),this.searchItems=_([]),this.loadSearch$=new C,this.searchEndpointsService=m(B),this.destroyRef=m(k),this.handleKeyup=a=>{if(a.key==="Escape"){this.closeSearch.emit();return}this.loadSearch$.next()},this.loadSearch=()=>{this.loadSearch$.pipe(v(100),S(()=>this.query()?!0:(this.searchItems.set([]),!1)),y(()=>this.searchEndpointsService.searchControllerSearch({requestBody:{query:this.query()}})),K(this.destroyRef)).subscribe(a=>{this.searchItems.set(a)})}}ngOnInit(){this.loadSearch()}};e.\u0275fac=function(c){return new(c||e)},e.\u0275cmp=M({type:e,selectors:[["app-search"]],outputs:{closeSearch:"closeSearch"},standalone:!0,features:[A],decls:7,vars:3,consts:[[1,"search-mode"],[1,"search-mode__bg-close",3,"click"],[1,"search-mode__content"],[1,"search-mode__input-wrapper"],[1,"icon--search","icon--lg",3,"icon"],["type","text","placeholder","S\xF6k","appAutofocus","",1,"search-mode__input",3,"ngModelChange","keyup","ngModel"],[1,"search-mode__result"],[1,"search-mode__result__item"],[3,"routerLink"],[1,"search-mode__result__item--heading"],[1,"icon-button","icon-button--ui"],[1,"icon--ui",3,"icon"],[1,"search-mode__tips"]],template:function(c,s){if(c&1&&(n(0,"div",0)(1,"div",1),x("click",function(){return s.closeSearch.emit()}),i(),n(2,"div",2)(3,"div",3),f(4,"app-icon",4),n(5,"input",5),R("ngModelChange",function(d){return F(s.query,d)||(s.query=d),d}),x("keyup",function(d){return s.handleKeyup(d)}),i()(),u(6,X,3,1,"div",6),i()()),c&2){let p;o(4),h("icon","search"),o(),q("ngModel",s.query),o(),g(6,(p=s.searchItems())?6:-1,p)}},dependencies:[z,$,W,N,j,V,L],styles:["[_nghost-%COMP%]{background:#0000004d;display:flex;inset:0;padding:16px;position:fixed}.search-mode__bg-close[_ngcontent-%COMP%]{inset:0;position:absolute}.search-mode__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:min-content;max-height:calc(100dvh - 100px);overflow:hidden;position:relative;width:100%}.search-mode__input-wrapper[_ngcontent-%COMP%]{align-items:center;background:var(--search-bg);border-radius:12px 12px 0 0;display:flex;padding:8px 16px}.search-mode__input-wrapper--right[_ngcontent-%COMP%]{margin-left:auto}.search-mode__input[_ngcontent-%COMP%]{appearance:none;background:none;color:var(--search-text);font-size:26px;height:50px;margin-left:16px;width:100%}.search-mode__input[_ngcontent-%COMP%]::placeholder{color:var(--search-text-placeholder)}.search-mode__result[_ngcontent-%COMP%]{background:var(--search-bg);border-bottom-left-radius:12px;border-bottom-right-radius:12px;border-top:1px solid var(--search-border);display:flex;flex-direction:column;overflow:auto;padding:8px 16px}.search-mode__result__item[_ngcontent-%COMP%]{align-items:center;display:flex;gap:8px}.search-mode__result__item--heading[_ngcontent-%COMP%]{font-weight:500}.search-mode__result__item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto}.search-mode__result__item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--search-text);cursor:pointer;flex:1;padding:4px 0}.search-mode__tips[_ngcontent-%COMP%]{color:var(--search-text);padding:4px 0}.search-mode__tips[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;padding-top:8px}.search-mode__tips[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:4px}"],changeDetection:0});let t=e;return t})();export{me as SearchComponent};
