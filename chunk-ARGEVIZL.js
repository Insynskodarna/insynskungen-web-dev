import{a as c}from"./chunk-2PVDX34T.js";import{a as d}from"./chunk-DB5SO6Y3.js";import{d as h}from"./chunk-ATQKBPWX.js";import{b as a}from"./chunk-BS3JEG2S.js";import{N as r,Q as n,W as o}from"./chunk-BTQ2WYIZ.js";var L=(()=>{let i=class i{constructor(){this.authEndpointsService=o(a),this.storageService=o(c),this.userStoreService=o(d),this.router=o(h),this.login=t=>this.authEndpointsService.authControllerLogin({requestBody:t}).pipe(r(e=>{this.setLoggedInStateAndRedirect(e)})),this.register=t=>this.authEndpointsService.authControllerRegister({requestBody:t}).pipe(r(e=>{this.setLoggedInStateAndRedirect(e)})),this.verify=t=>this.authEndpointsService.authControllerVerifyEmail({token:t}).pipe(r(e=>{this.setLoggedInStateAndRedirect(e)})),this.setNewPassword=(t,e)=>this.authEndpointsService.authControllerSetNewPassword({token:t,requestBody:e}).pipe(r(p=>{this.setLoggedInStateAndRedirect(p)})),this.setLoggedInStateAndRedirect=t=>{this.storageService.persistIsLoggedIn(!0),this.userStoreService.setUserData({isLoading:!1,isLoggedIn:!0,email:t.email}),this.router.navigate(["/app"])}}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();export{L as a};
